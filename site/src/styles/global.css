@tailwind base;
@tailwind components;
@tailwind utilities;

/* Screen reader only utility */
.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip-path: inset(50%);
  white-space: nowrap;
  border: 0;
}

.sr-only:focus {
  position: static;
  width: auto;
  height: auto;
  padding: inherit;
  margin: inherit;
  overflow: visible;
  clip: auto;
  white-space: normal;
}

:root {
  --maze-line-color: #5D5066;
  --gradient-base-r: 208;
  --gradient-base-g: 219;
  --gradient-base-b: 203;
}

body {
  background-color: rgb(var(--gradient-base-r), var(--gradient-base-g), var(--gradient-base-b));
}

/* Desktop gradient: soft fade with wide solid center for decorative elements */
.gradient-overlay {
  background: linear-gradient(to right,
      transparent 0%,
      rgba(var(--gradient-base-r), var(--gradient-base-g), var(--gradient-base-b), 0.01) 8%,
      rgba(var(--gradient-base-r), var(--gradient-base-g), var(--gradient-base-b), 0.05) 12%,
      rgba(var(--gradient-base-r), var(--gradient-base-g), var(--gradient-base-b), 0.1) 16%,
      rgba(var(--gradient-base-r), var(--gradient-base-g), var(--gradient-base-b), 0.3) 20%,
      rgba(var(--gradient-base-r), var(--gradient-base-g), var(--gradient-base-b), 0.5) 25%,
      rgba(var(--gradient-base-r), var(--gradient-base-g), var(--gradient-base-b), 0.7) 30%,
      rgba(var(--gradient-base-r), var(--gradient-base-g), var(--gradient-base-b), 0.85) 35%,
      rgba(var(--gradient-base-r), var(--gradient-base-g), var(--gradient-base-b), 0.95) 40%,
      rgba(var(--gradient-base-r), var(--gradient-base-g), var(--gradient-base-b), 1) 45%,
      rgba(var(--gradient-base-r), var(--gradient-base-g), var(--gradient-base-b), 1) 50%,
      rgba(var(--gradient-base-r), var(--gradient-base-g), var(--gradient-base-b), 1) 55%,
      rgba(var(--gradient-base-r), var(--gradient-base-g), var(--gradient-base-b), 0.95) 60%,
      rgba(var(--gradient-base-r), var(--gradient-base-g), var(--gradient-base-b), 0.85) 65%,
      rgba(var(--gradient-base-r), var(--gradient-base-g), var(--gradient-base-b), 0.7) 70%,
      rgba(var(--gradient-base-r), var(--gradient-base-g), var(--gradient-base-b), 0.5) 75%,
      rgba(var(--gradient-base-r), var(--gradient-base-g), var(--gradient-base-b), 0.3) 80%,
      rgba(var(--gradient-base-r), var(--gradient-base-g), var(--gradient-base-b), 0.1) 84%,
      rgba(var(--gradient-base-r), var(--gradient-base-g), var(--gradient-base-b), 0.05) 88%,
      rgba(var(--gradient-base-r), var(--gradient-base-g), var(--gradient-base-b), 0.01) 92%,
      transparent 100%);
}

/* Tablet: tighten the gradient transition to keep more of the content area clear */
@media (max-width: 1024px) {
  .gradient-overlay {
    background: linear-gradient(to right,
        transparent 0%,
        rgba(var(--gradient-base-r), var(--gradient-base-g), var(--gradient-base-b), 0.05) 5%,
        rgba(var(--gradient-base-r), var(--gradient-base-g), var(--gradient-base-b), 0.15) 10%,
        rgba(var(--gradient-base-r), var(--gradient-base-g), var(--gradient-base-b), 0.4) 15%,
        rgba(var(--gradient-base-r), var(--gradient-base-g), var(--gradient-base-b), 0.7) 20%,
        rgba(var(--gradient-base-r), var(--gradient-base-g), var(--gradient-base-b), 1) 25%,
        rgba(var(--gradient-base-r), var(--gradient-base-g), var(--gradient-base-b), 1) 50%,
        rgba(var(--gradient-base-r), var(--gradient-base-g), var(--gradient-base-b), 1) 75%,
        rgba(var(--gradient-base-r), var(--gradient-base-g), var(--gradient-base-b), 0.7) 80%,
        rgba(var(--gradient-base-r), var(--gradient-base-g), var(--gradient-base-b), 0.4) 85%,
        rgba(var(--gradient-base-r), var(--gradient-base-g), var(--gradient-base-b), 0.15) 90%,
        rgba(var(--gradient-base-r), var(--gradient-base-g), var(--gradient-base-b), 0.05) 95%,
        transparent 100%);
  }
}

/* Mobile: aggressive tight gradient to preserve text area and reduce visual clutter */
@media (max-width: 640px) {
  .gradient-overlay {
    background: linear-gradient(to right,
        transparent 0%,
        rgba(var(--gradient-base-r), var(--gradient-base-g), var(--gradient-base-b), 0.08) 3%,
        rgba(var(--gradient-base-r), var(--gradient-base-g), var(--gradient-base-b), 0.25) 8%,
        rgba(var(--gradient-base-r), var(--gradient-base-g), var(--gradient-base-b), 0.5) 12%,
        rgba(var(--gradient-base-r), var(--gradient-base-g), var(--gradient-base-b), 0.5) 50%,
        rgba(var(--gradient-base-r), var(--gradient-base-g), var(--gradient-base-b), 0.5) 88%,
        rgba(var(--gradient-base-r), var(--gradient-base-g), var(--gradient-base-b), 0.25) 92%,
        rgba(var(--gradient-base-r), var(--gradient-base-g), var(--gradient-base-b), 0.08) 97%,
        transparent 100%);
  }
}

html.dark {
  --maze-line-color: #CC6600;
  --gradient-base-r: 0;
  --gradient-base-g: 0;
  --gradient-base-b: 0;
}

/* Apply white text to navigation and non-prose content in dark mode */
html.dark nav,
html.dark .nav-links a,
html.dark footer {
  color: #fff;
}

html.dark .gradient-overlay {
  background: linear-gradient(to right,
      transparent 0%,
      rgba(var(--gradient-base-r), var(--gradient-base-g), var(--gradient-base-b), 0.01) 8%,
      rgba(var(--gradient-base-r), var(--gradient-base-g), var(--gradient-base-b), 0.05) 12%,
      rgba(var(--gradient-base-r), var(--gradient-base-g), var(--gradient-base-b), 0.1) 16%,
      rgba(var(--gradient-base-r), var(--gradient-base-g), var(--gradient-base-b), 0.3) 20%,
      rgba(var(--gradient-base-r), var(--gradient-base-g), var(--gradient-base-b), 0.5) 25%,
      rgba(var(--gradient-base-r), var(--gradient-base-g), var(--gradient-base-b), 0.7) 30%,
      rgba(var(--gradient-base-r), var(--gradient-base-g), var(--gradient-base-b), 0.85) 35%,
      rgba(var(--gradient-base-r), var(--gradient-base-g), var(--gradient-base-b), 0.95) 40%,
      rgba(var(--gradient-base-r), var(--gradient-base-g), var(--gradient-base-b), 1) 45%,
      rgba(var(--gradient-base-r), var(--gradient-base-g), var(--gradient-base-b), 1) 50%,
      rgba(var(--gradient-base-r), var(--gradient-base-g), var(--gradient-base-b), 1) 55%,
      rgba(var(--gradient-base-r), var(--gradient-base-g), var(--gradient-base-b), 0.95) 60%,
      rgba(var(--gradient-base-r), var(--gradient-base-g), var(--gradient-base-b), 0.85) 65%,
      rgba(var(--gradient-base-r), var(--gradient-base-g), var(--gradient-base-b), 0.7) 70%,
      rgba(var(--gradient-base-r), var(--gradient-base-g), var(--gradient-base-b), 0.5) 75%,
      rgba(var(--gradient-base-r), var(--gradient-base-g), var(--gradient-base-b), 0.3) 80%,
      rgba(var(--gradient-base-r), var(--gradient-base-g), var(--gradient-base-b), 0.1) 84%,
      rgba(var(--gradient-base-r), var(--gradient-base-g), var(--gradient-base-b), 0.05) 88%,
      rgba(var(--gradient-base-r), var(--gradient-base-g), var(--gradient-base-b), 0.01) 92%,
      transparent 100%);
}

/* Tablet dark mode: tighten the gradient */
@media (max-width: 1024px) {
  html.dark .gradient-overlay {
    background: linear-gradient(to right,
        transparent 0%,
        rgba(var(--gradient-base-r), var(--gradient-base-g), var(--gradient-base-b), 0.05) 5%,
        rgba(var(--gradient-base-r), var(--gradient-base-g), var(--gradient-base-b), 0.15) 10%,
        rgba(var(--gradient-base-r), var(--gradient-base-g), var(--gradient-base-b), 0.4) 15%,
        rgba(var(--gradient-base-r), var(--gradient-base-g), var(--gradient-base-b), 0.7) 20%,
        rgba(var(--gradient-base-r), var(--gradient-base-g), var(--gradient-base-b), 1) 25%,
        rgba(var(--gradient-base-r), var(--gradient-base-g), var(--gradient-base-b), 1) 50%,
        rgba(var(--gradient-base-r), var(--gradient-base-g), var(--gradient-base-b), 1) 75%,
        rgba(var(--gradient-base-r), var(--gradient-base-g), var(--gradient-base-b), 0.7) 80%,
        rgba(var(--gradient-base-r), var(--gradient-base-g), var(--gradient-base-b), 0.4) 85%,
        rgba(var(--gradient-base-r), var(--gradient-base-g), var(--gradient-base-b), 0.15) 90%,
        rgba(var(--gradient-base-r), var(--gradient-base-g), var(--gradient-base-b), 0.05) 95%,
        transparent 100%);
  }
}

/* Mobile dark mode: aggressive tight gradient */
@media (max-width: 640px) {
  html.dark .gradient-overlay {
    background: linear-gradient(to right,
        transparent 0%,
        rgba(var(--gradient-base-r), var(--gradient-base-g), var(--gradient-base-b), 0.08) 3%,
        rgba(var(--gradient-base-r), var(--gradient-base-g), var(--gradient-base-b), 0.25) 8%,
        rgba(var(--gradient-base-r), var(--gradient-base-g), var(--gradient-base-b), 0.5) 12%,
        rgba(var(--gradient-base-r), var(--gradient-base-g), var(--gradient-base-b), 0.5) 50%,
        rgba(var(--gradient-base-r), var(--gradient-base-g), var(--gradient-base-b), 0.5) 88%,
        rgba(var(--gradient-base-r), var(--gradient-base-g), var(--gradient-base-b), 0.25) 92%,
        rgba(var(--gradient-base-r), var(--gradient-base-g), var(--gradient-base-b), 0.08) 97%,
        transparent 100%);
  }
}

/* Dark-mode utility overrides: keep light-mode classes unchanged, provide readable alternatives when html.dark is enabled */
html.dark .text-gray-700 {
  color: #d1d5db !important; /* gray-300 */
}

html.dark .text-gray-800 {
  color: #e5e7eb !important; /* gray-200 */
}

html.dark .text-gray-900 {
  color: #ffffff !important; /* white for primary headings */
}

html.dark .text-gray-600 {
  color: #9ca3af !important; /* gray-400 */
}

html.dark .text-gray-500,
html.dark .text-gray-400 {
  color: #9ca3af !important; /* gray-400 */
}

html.dark .bg-gray-100 {
  background-color: #111827 !important; /* dark badge bg */
}

html.dark .text-gray-700.bg-gray-100 {
  color: #e5e7eb !important; /* badge text */
}

html.dark .border-t {
  border-color: rgba(255, 255, 255, 0.06) !important;
}

/* Prose content color overrides for better readability */
.prose {
  --tw-prose-body: #374151;
  /* gray-700 for light mode */
  --tw-prose-headings: #111827;
  /* gray-900 for light mode */
  --tw-prose-links: #2563eb;
  /* blue-600 for light mode */
  --tw-prose-quotes: #6b7280;
  /* gray-500 for light mode */
  --tw-prose-quote-borders: #d1d5db;
  /* gray-300 for light mode */
  --tw-prose-captions: #6b7280;
  /* gray-500 for light mode */
  --tw-prose-code: #111827;
  /* gray-900 for light mode */
  --tw-prose-pre-code: #e5e7eb;
  /* gray-200 for light mode */
  --tw-prose-pre-bg: #1f2937;
  /* gray-800 for light mode */
  --tw-prose-th-borders: #d1d5db;
  /* gray-300 for light mode */
  --tw-prose-td-borders: #e5e7eb;
  /* gray-200 for light mode */
}

.dark .prose {
  --tw-prose-body: #d1d5db;
  /* gray-300 for dark mode */
  --tw-prose-headings: #f9fafb;
  /* gray-50 for dark mode */
  --tw-prose-links: #60a5fa;
  /* blue-400 for dark mode */
  --tw-prose-quotes: #9ca3af;
  /* gray-400 for dark mode */
  --tw-prose-quote-borders: #374151;
  /* gray-700 for dark mode */
  --tw-prose-captions: #9ca3af;
  /* gray-400 for dark mode */
  --tw-prose-code: #f9fafb;
  /* gray-50 for dark mode */
  --tw-prose-pre-code: #d1d5db;
  /* gray-300 for dark mode */
  --tw-prose-pre-bg: #1f2937;
  /* gray-800 for dark mode */
  --tw-prose-th-borders: #374151;
  /* gray-700 for dark mode */
  --tw-prose-td-borders: #4b5563;
  /* gray-600 for dark mode */
}

/* Additional dark-mode overrides specifically for main content */
html.dark main,
html.dark main h1,
html.dark main h2,
html.dark main h3,
html.dark main h4,
html.dark main p,
html.dark main a,
html.dark main li {
  color: #d1d5db !important; /* readable light gray */
}

/* Make links slightly brighter in main when dark mode */
html.dark main a {
  color: #60a5fa !important;
}

/* Ensure list markers are visible */
html.dark main ul > li::marker {
  color: #9ca3af !important;
}

/* Custom dash marker for ULs with class list-dash */
ul.list-dash>li::marker {
  content: "- ";
  font-weight: bold;
}

/* Obsidian-like callouts for blockquotes and explicit callout blocks */
.prose blockquote {
  border-left: 4px solid var(--tw-prose-quote-borders);
  background-color: rgba(209, 213, 219, 0.08);
  /* use equal horizontal padding and leave room for the icon */
  padding: 0.75rem 2.5rem;
  margin: 1.25rem 0;
  border-radius: 0.375rem;
  position: relative;
}

.prose blockquote::before {
  content: "";
  position: absolute;
  /* nudge the icon a little further left (closer to the border) */
  /* place icon at center between left border (4px) and the start of text (padding-left:2.5rem) */
  left: calc(4px + 1.25rem);
  transform: translateX(-50%);
  top: 0.6rem;
  font-size: 1rem;
}

.prose blockquote p:first-child {
  margin-top: 0;
}

.prose blockquote p:last-child {
  margin-bottom: 0;
}

/* Dark-mode adjustments */
html.dark .prose blockquote {
  background-color: rgba(55, 65, 81, 0.32);
  border-left-color: var(--tw-prose-quote-borders);
}

html.dark .prose blockquote::before {
  content: "";
}

/* Explicit callout classes you can add using HTML in Markdown when you want a specific type */
.callout {
  display: block;
  padding: 0.75rem 2.5rem;
  border-radius: 0.375rem;
  margin: 1rem 0;
  position: relative;
}

.callout .callout-heading {
  font-weight: 700;
  margin-bottom: 0.25rem;
}

/* Shared positioning for all callout icons */
.callout::before {
  content: "";
  position: absolute;
  left: calc(4px + 1.25rem);
  transform: translateX(-50%);
  top: 0.6rem;
}

.callout.note {
  border-left: 4px solid #2563eb;
  background: rgba(37, 99, 235, 0.06);
}

.callout.warning {
  border-left: 4px solid #f59e0b;
  background: rgba(245, 158, 11, 0.06);
}

.callout.success {
  border-left: 4px solid #10b981;
  background: rgba(16, 185, 129, 0.06);
}

/* Make sure prose styles inside callouts look correct */
.callout :where(p, ul, ol, pre, code) {
  margin: 0.25rem 0;
}

::-webkit-scrollbar {
  display: none;
}

html {
  scrollbar-width: none;
}
