---
// This component loads the maze asynchronously to avoid render blocking
---

<div class="relative w-full h-full">
  <!-- Canvas will be added dynamically after page load -->
  <div id="maze-canvas-container"></div>

  <!-- Semi-transparent overlay for better text readability -->
  <div class="fixed inset-0 z-5 pointer-events-none">
    <!-- Single smooth gradient covering entire viewport: stronger centre, gentler transparent edges -->
    <div class="w-full h-full gradient-overlay"></div>
  </div>

  <div class="relative z-10">
    <slot />
  </div>
</div>

<script>
  // Load maze asynchronously after page loads to avoid render blocking
  window.addEventListener("load", () => {
    const container = document.getElementById("maze-canvas-container");
    if (container && container.parentElement) {
      // Create canvas element
      const canvas = document.createElement("canvas");
      canvas.id = "mazeCanvas";
      canvas.className = "fixed inset-0 z-0 w-full h-full pointer-events-none";
      canvas.setAttribute("aria-hidden", "true");

      // Insert canvas at the beginning of the container's parent
      container.parentElement.insertBefore(canvas, container);

      // Initialize maze
      import("../scripts/drawHexMaze.js").then(({ default: initMaze }) => {
        initMaze(canvas);
      });
    }
  });
</script>
