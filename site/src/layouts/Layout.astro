---
import "../styles/global.css";
import BaseHead from "../components/BaseHead.astro";
import MazeBackground from "../components/mazeBackground.astro";
import ThemeIcon from "../components/ThemeIcon.astro";

export interface Props {
  title: string;
  description?: string;
  image?: string;
}
const { title, description, image } = Astro.props;
// Determine the current request path so we can highlight active nav links
const currentPath =
  typeof Astro.request !== "undefined" && Astro.request?.url
    ? new URL(Astro.request.url).pathname
    : "/";

function isActive(path: string) {
  if (path === "/") return currentPath === "/";
  return currentPath === path || currentPath.startsWith(path + "/");
}
---

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <BaseHead title={title} description={description} image={image} />
    <link
      rel="alternate"
      type="application/rss+xml"
      title="Ed Thomas | Blog"
      href="/rss.xml"
    />
  </head>
  <body class="min-h-screen">
    <MazeBackground>
      <div
        class="min-h-screen max-w-2xl mx-auto px-6 py-8 font-mono text-sm leading-relaxed flex flex-col"
      >
        <nav class="mb-8 relative">
          <div class="flex justify-center gap-6 items-center tracking-wide">
            <a
              href="/"
              class={`px-1 hover:underline ${isActive("/") ? "font-bold underline" : ""}`}
              >HOME</a
            >
            <a
              href="/blog"
              class={`px-1 hover:underline ${isActive("/blog") ? "font-bold underline" : ""}`}
              >BLOG</a
            >
            <a
              href="/projects"
              class={`px-1 hover:underline ${isActive("/projects") ? "font-bold underline" : ""}`}
              >PROJECTS</a
            >
            <a
              href="/misc"
              class={`px-1 hover:underline ${isActive("/misc") ? "font-bold underline" : ""}`}
              >MISC</a
            >
            <a
              href="/cv"
              class={`px-1 hover:underline ${isActive("/cv") ? "font-bold underline" : ""}`}
              >CV</a
            >
            <a
              href="/meta"
              class={`px-1 hover:underline ${isActive("/meta") ? "font-bold underline" : ""}`}
              >META</a
          </div>

          <div class="absolute right-0 top-0">
            <ThemeIcon />
          </div>
        </nav>

        <main class="flex-1">
          <slot />
        </main>

        <footer class="mt-8 text-center">
          <div class="flex justify-center gap-4 mb-4">
            <a
              href="https://github.com/pixel-87"
              class="hover:text-gray-600"
              aria-label="GitHub"
            >
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="24"
                height="24"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
                class="icon icon-tabler icons-tabler-outline icon-tabler-brand-github"
                ><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path
                  d="M9 19c-4.3 1.4 -4.3 -2.5 -6 -3m12 5v-3.5c0 -1 .1 -1.4 -.5 -2c2.8 -.3 5.5 -1.4 5.5 -6a4.6 4.6 0 0 0 -1.3 -3.2a4.2 4.2 0 0 0 -.1 -3.2s-1.1 -.3 -3.5 1.3a12.3 12.3 0 0 0 -6.2 0c-2.4 -1.6 -3.5 -1.3 -3.5 -1.3a4.2 4.2 0 0 0 -.1 3.2a4.6 4.6 0 0 0 -1.3 3.2c0 4.6 2.7 5.7 5.5 6c-.6 .6 -.6 1.2 -.5 2v3.5"
                ></path></svg
              >
            </a>
            <a
              href="https://www.linkedin.com/in/edthomas87"
              class="hover:text-gray-600"
              aria-label="LinkedIn"
            >
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="24"
                height="24"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
                class="icon icon-tabler icons-tabler-outline icon-tabler-brand-linkedin"
                ><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path
                  d="M8 11v5"></path><path d="M8 8v.01"></path><path
                  d="M12 16v-5"></path><path d="M16 16v-3a2 2 0 1 0 -4 0"
                ></path><path
                  d="M3 7a4 4 0 0 1 4 -4h10a4 4 0 0 1 4 4v10a4 4 0 0 1 -4 4h-10a4 4 0 0 1 -4 -4z"
                ></path></svg
              >
            </a>
            <a
              href="https://hachyderm.io/@EdThomas"
              class="hover:text-gray-600"
              aria-label="Mastodon"
            >
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="24"
                height="24"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
                class="icon icon-tabler icons-tabler-outline icon-tabler-brand-mastodon"
                ><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path
                  d="M18.648 15.254c-1.816 1.763 -6.648 1.626 -6.648 1.626a18.262 18.262 0 0 1 -3.288 -.256c1.127 1.985 4.12 2.81 8.982 2.475c-1.945 2.013 -13.598 5.257 -13.668 -7.636l-.026 -1.154c0 -3.036 .023 -4.115 1.352 -5.633c1.671 -1.91 6.648 -1.666 6.648 -1.666s4.977 -.243 6.648 1.667c1.329 1.518 1.352 2.597 1.352 5.633s-.456 4.074 -1.352 4.944z"
                ></path><path
                  d="M12 11.204v-2.926c0 -1.258 -.895 -2.278 -2 -2.278s-2 1.02 -2 2.278v4.722m4 -4.722c0 -1.258 .895 -2.278 2 -2.278s2 1.02 2 2.278v4.722"
                ></path></svg
              >
            </a>
          </div>
        </footer>
      </div>
    </MazeBackground>
  </body>
</html>
